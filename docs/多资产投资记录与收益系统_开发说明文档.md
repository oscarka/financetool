
# 🧩 多资产投资记录与收益分析系统（开发需求文档 v1.1）

## 🧭 一、项目目标

### 🎯 核心目的：

1. **资产记录与管理**  
   - 跨平台资产（基金、数字货币、万能险、银行等）记录  
   - 多币种支持，自动折算为基准币种（如 CNY / USD）

2. **辅助决策与收益统计**  
   - 自动计算累计收益、年化收益、资产结构  
   - 支持记录每次买卖操作与策略逻辑，提供决策辅助

---

## 🧱 二、核心模块设计

### 1️⃣ 资产交易记录模块（手动录入为主）

| 字段名 | 类型 | 说明 |
|--------|------|------|
| 日期 | Date | 交易发生日期 |
| 平台 | String | 如：OKX、支付宝、天天基金、Wise等 |
| 资产类型 | Enum | 数字货币 / 基金 / 万能险 / 银行理财等 |
| 操作类型 | Enum | 买入 / 卖出 / 分红 / 转入 / 转出 |
| 币种 | String | 如 USDT、CNY、AUD、BTC 等 |
| 金额 | Float | 操作涉及金额 |
| 数量 / 份额 | Float | 对应资产数量（如基金份额） |
| 净值 / 单价 | Float | 每单位资产的价格 |
| 手续费 | Float | 操作中产生的费用 |
| 备注 | Text | 自定义描述，如“定投”、“再平衡”、“短期套利” |

---

### 2️⃣ 当前持仓模块（自动计算）

根据历史交易动态计算每种资产的当前持仓、累计投入、当前市值、盈亏情况等。

| 资产名称 | 当前数量 | 单位成本 | 当前净值 | 当前市值 | 累计收益 | 收益率 |
|----------|----------|----------|----------|-----------|-----------|--------|

---

### 3️⃣ 净值/市值更新模块

- **基金净值**：支持后期对接雪球/天天基金网，初期手动更新  
- **数字货币市价**：对接 OKX API（含余额、理财收益）  
- **银行/保险账户**：手动更新金额或估值  
- **汇率数据源**：由 Wise API 提供，支持实时币种转换  

---

### 4️⃣ 收益与风险分析模块

输出图表/表格，包括：

- 累计收益、年化收益率、最大回撤、投入与产出分析  
- 资产结构（当前资产类别/币种分布 饼图）  
- 投资节奏 vs 收益对比折线图  
- 自定义目标追踪图（如“2025年底净值目标”）

---

### 5️⃣ 操作日志模块（行为追踪）

| 日期 | 操作对象 | 操作类型 | 判断逻辑 | 情绪评分 | 标签 | 总结备注 |
|------|----------|----------|-----------|------------|------|-----------|

---

## 🌐 三、API 对接需求

### ✅ OKX API（必接）

- 获取账户余额：`/api/v5/account/balance`  
- 获取赚币/理财记录：`/api/v5/asset/earning-record`  
- 获取收益：`/api/v5/asset/income`  
- 用于同步数字资产账户现状  

### ✅ Wise API（需对接）

- **账户余额**接口（各币种余额）  
- **交易记录**接口（转入/转出/兑换等）  
- **汇率接口**：用于计算资产统一币种（如汇总成 CNY）  

参考文档：[https://api-docs.wise.com/](https://api-docs.wise.com/)

注意：
- 使用 OAuth2 或 Personal Access Token 授权  
- 可每日定时获取数据，写入数据库用于报表分析  

### 🛑 PayPal 不对接（个人账户API受限，非重点）

---

## 🧰 四、技术建议（适配 Cursor 开发）

| 模块 | 建议 |
|------|------|
| 前端 | React + Tailwind + shadcn/ui |
| 后端 | Python (Flask/FastAPI) 或 Node.js |
| 数据存储 | SQLite / JSON（本地化，轻量） |
| 定时任务 | `cron` 或 `schedule` 定时拉取 API 数据（OKX/Wise） |
| 可选脚本 | Python 爬虫用于基金净值获取（后续扩展） |

---

## ⏳ 五、开发阶段规划

### 🥇 MVP 阶段（立即开发）

- 手动录入资产交易记录  
- 自动计算当前持仓和收益  
- 基础图表展示（饼图、折线图）  
- 操作日志模块（含主观判断记录）  

### 🥈 二期（建议开发）

- 对接 OKX API、Wise API，自动同步资产与汇率  
- 添加汇率转换功能，统一显示资产净值  
- 提醒功能（回撤/超额收益提示）  

---

## 📦 补充建议

- 使用统一币种（如 CNY）计算所有资产净值  
- 汇率应定期缓存，避免频繁调用  
- 支持导出数据（CSV/JSON），用于备份或外部分析  
- 日志模块支持按策略/标签聚合复盘  
