# æ±‡ç‡ç®¡ç†æ¨¡å—æ–‡æ¡£

## ğŸ“‹ æ¦‚è¿°

æ±‡ç‡ç®¡ç†æ¨¡å—åŸºäºakshareåº“æä¾›å®æ—¶æ±‡ç‡æ•°æ®æŸ¥è¯¢å’Œè´§å¸è½¬æ¢åŠŸèƒ½ï¼Œæ”¯æŒå¤šç§è´§å¸å¯¹äººæ°‘å¸çš„æ±‡ç‡æŸ¥è¯¢ã€‚

## ğŸ”— åŸºç¡€ä¿¡æ¯

- **åŸºç¡€URL**: `http://localhost:8000/api/v1/exchange-rates`
- **æ•°æ®æº**: akshare (ä¸­å›½é“¶è¡Œå¤–æ±‡ç‰Œä»·)
- **æ•°æ®æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8

## ğŸ“Š å“åº”æ ¼å¼

æ‰€æœ‰APIéƒ½ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

```json
{
  "success": true,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    // å…·ä½“æ•°æ®
  }
}
```

## ğŸ¯ APIæ¥å£åˆ—è¡¨

### 1. è´§å¸ç®¡ç†

#### 1.1 è·å–è´§å¸åˆ—è¡¨
- **URL**: `GET /currencies`
- **æè¿°**: è·å–ç³»ç»Ÿæ”¯æŒçš„è´§å¸åˆ—è¡¨
- **å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–åˆ° 1 ç§è´§å¸",
  "data": {
    "currencies": [
      {
        "code": "USD",
        "name": "ç¾å…ƒ",
        "symbol": "$",
        "rate": 691.8,
        "update_time": "2025-07-05T23:59:52.083494"
      }
    ]
  }
}
```

### 2. æ±‡ç‡æŸ¥è¯¢

#### 2.1 è·å–æ‰€æœ‰æ±‡ç‡
- **URL**: `GET /rates`
- **æè¿°**: è·å–æ‰€æœ‰è´§å¸çš„å®æ—¶æ±‡ç‡
- **å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å–åˆ° 1 ç§è´§å¸çš„æ±‡ç‡",
  "data": {
    "rates": [
      {
        "currency": "USD",
        "currency_name": "ç¾å…ƒ",
        "spot_buy": 691.8,
        "spot_sell": 694.73,
        "cash_buy": 686.17,
        "cash_sell": 694.73,
        "middle_rate": 689.51,
        "update_time": "2025-07-05T23:59:52.083494"
      }
    ]
  }
}
```

#### 2.2 è·å–æŒ‡å®šè´§å¸æ±‡ç‡
- **URL**: `GET /rates/{currency}`
- **æè¿°**: è·å–æŒ‡å®šè´§å¸çš„æ±‡ç‡ä¿¡æ¯
- **è·¯å¾„å‚æ•°**:
  - `currency`: è´§å¸ä»£ç ï¼ˆå¦‚USDã€EURç­‰ï¼‰
- **å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å– USD æ±‡ç‡æˆåŠŸ",
  "data": {
    "rate": {
      "currency": "USD",
      "currency_name": "ç¾å…ƒ",
      "spot_buy": 691.8,
      "spot_sell": 694.73,
      "cash_buy": 686.17,
      "cash_sell": 694.73,
      "middle_rate": 689.51,
      "update_time": "2025-07-05T23:59:52.083494"
    }
  }
}
```

#### 2.3 è·å–å†å²æ±‡ç‡
- **URL**: `GET /rates/{currency}/history`
- **æè¿°**: è·å–æŒ‡å®šè´§å¸çš„å†å²æ±‡ç‡æ•°æ®
- **æŸ¥è¯¢å‚æ•°**:
  - `start_date`: å¼€å§‹æ—¥æœŸï¼ˆå¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼‰
  - `end_date`: ç»“æŸæ—¥æœŸï¼ˆå¯é€‰ï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼‰
- **å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è·å– USD å†å²æ±‡ç‡æˆåŠŸ",
  "data": {
    "history": [
      {
        "date": "2023-03-06",
        "currency": "USD",
        "rate": 689.51,
        "change": 0.0,
        "change_pct": 0.0
      }
    ]
  }
}
```

### 3. è´§å¸è½¬æ¢

#### 3.1 è´§å¸è½¬æ¢
- **URL**: `GET /convert`
- **æè¿°**: è¿›è¡Œè´§å¸è½¬æ¢è®¡ç®—
- **æŸ¥è¯¢å‚æ•°**:
  - `amount`: è½¬æ¢é‡‘é¢ï¼ˆå¿…éœ€ï¼‰
  - `from_currency`: æºè´§å¸ï¼ˆå¿…éœ€ï¼‰
  - `to_currency`: ç›®æ ‡è´§å¸ï¼ˆå¯é€‰ï¼Œé»˜è®¤CNYï¼‰
- **å“åº”ç¤ºä¾‹**:
```json
{
  "success": true,
  "message": "è´§å¸è½¬æ¢æˆåŠŸ",
  "data": {
    "original_amount": 100,
    "original_currency": "USD",
    "converted_amount": 68951.0,
    "target_currency": "CNY"
  }
}
```

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### Pythonç¤ºä¾‹

```python
import requests

# è·å–æ‰€æœ‰æ±‡ç‡
response = requests.get("http://localhost:8000/api/v1/exchange-rates/rates")
if response.status_code == 200:
    data = response.json()
    print(f"ç¾å…ƒæ±‡ç‡: {data['data']['rates'][0]['middle_rate']}")

# è´§å¸è½¬æ¢
response = requests.get(
    "http://localhost:8000/api/v1/exchange-rates/convert",
    params={
        "amount": 100,
        "from_currency": "USD",
        "to_currency": "CNY"
    }
)
if response.status_code == 200:
    data = response.json()
    print(f"100ç¾å…ƒ = {data['data']['converted_amount']} äººæ°‘å¸")
```

### cURLç¤ºä¾‹

```bash
# è·å–æ‰€æœ‰æ±‡ç‡
curl -X GET "http://localhost:8000/api/v1/exchange-rates/rates"

# è·å–ç¾å…ƒæ±‡ç‡
curl -X GET "http://localhost:8000/api/v1/exchange-rates/rates/USD"

# è´§å¸è½¬æ¢
curl -X GET "http://localhost:8000/api/v1/exchange-rates/convert?amount=100&from_currency=USD&to_currency=CNY"
```

## ğŸ¨ å‰ç«¯ç•Œé¢

### åŠŸèƒ½ç‰¹æ€§

1. **å®æ—¶æ±‡ç‡æ˜¾ç¤º**: æ˜¾ç¤ºå½“å‰ç¾å…ƒå¯¹äººæ°‘å¸çš„å®æ—¶æ±‡ç‡
2. **è´§å¸è½¬æ¢å™¨**: æ”¯æŒå¤šç§è´§å¸ä¹‹é—´çš„è½¬æ¢
3. **æ±‡ç‡ç»Ÿè®¡**: æ˜¾ç¤ºä¸»è¦è´§å¸çš„æ±‡ç‡ç»Ÿè®¡ä¿¡æ¯
4. **å†å²æ±‡ç‡**: æŸ¥çœ‹å†å²æ±‡ç‡èµ°åŠ¿
5. **æ•°æ®åˆ·æ–°**: æ”¯æŒæ‰‹åŠ¨åˆ·æ–°æ±‡ç‡æ•°æ®

### ç•Œé¢ç»„ä»¶

- **è´§å¸è½¬æ¢å™¨**: è¾“å…¥é‡‘é¢å’Œé€‰æ‹©è´§å¸è¿›è¡Œè½¬æ¢
- **æ±‡ç‡è¡¨æ ¼**: æ˜¾ç¤ºè¯¦ç»†çš„æ±‡ç‡ä¿¡æ¯ï¼ˆç°æ±‡ä¹°å…¥ä»·ã€ç°æ±‡å–å‡ºä»·ç­‰ï¼‰
- **ç»Ÿè®¡å¡ç‰‡**: æ˜¾ç¤ºæ”¯æŒè´§å¸æ•°é‡ã€ä¸»è¦è´§å¸æ±‡ç‡ç­‰ç»Ÿè®¡ä¿¡æ¯
- **å†å²æ•°æ®è¡¨æ ¼**: æ˜¾ç¤ºå†å²æ±‡ç‡æ•°æ®

## ğŸš¨ é”™è¯¯å¤„ç†

### å¸¸è§é”™è¯¯ç 

- `400`: è¯·æ±‚å‚æ•°é”™è¯¯
- `404`: è´§å¸ä¸å­˜åœ¨
- `500`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

### é”™è¯¯å“åº”æ ¼å¼

```json
{
  "detail": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æº**: æ±‡ç‡æ•°æ®æ¥æºäºakshareåº“çš„ä¸­å›½é“¶è¡Œå¤–æ±‡ç‰Œä»·
2. **æ›´æ–°é¢‘ç‡**: æ±‡ç‡æ•°æ®æ¯æ—¥æ›´æ–°
3. **è´§å¸æ”¯æŒ**: ç›®å‰ä¸»è¦æ”¯æŒç¾å…ƒå¯¹äººæ°‘å¸çš„æ±‡ç‡
4. **å†å²æ•°æ®**: å†å²æ±‡ç‡æ•°æ®å¯èƒ½æœ‰é™åˆ¶
5. **è½¬æ¢ç²¾åº¦**: è´§å¸è½¬æ¢ä½¿ç”¨ä¸­è¡ŒæŠ˜ç®—ä»·è¿›è¡Œè®¡ç®—

## ğŸ”„ æ•°æ®åŒæ­¥

ç³»ç»Ÿé€šè¿‡akshareåº“è‡ªåŠ¨è·å–æœ€æ–°çš„æ±‡ç‡æ•°æ®ï¼š

- **æ•°æ®æº**: `ak.currency_boc_sina()`
- **æ›´æ–°ç­–ç•¥**: æ¯æ¬¡APIè°ƒç”¨æ—¶è·å–æœ€æ–°æ•°æ®
- **ç¼“å­˜ç­–ç•¥**: æš‚ä¸ç¼“å­˜ï¼Œå®æ—¶è·å–

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### åç«¯å®ç°

- **æœåŠ¡ç±»**: `ExchangeRateService`
- **APIè·¯ç”±**: `exchange_rates.py`
- **æ•°æ®æº**: akshareåº“
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶

### å‰ç«¯å®ç°

- **é¡µé¢ç»„ä»¶**: `ExchangeRates.tsx`
- **APIæœåŠ¡**: `exchangeRateAPI`
- **UIæ¡†æ¶**: Ant Design
- **çŠ¶æ€ç®¡ç†**: React Hooks

## ğŸ“ˆ æ‰©å±•è®¡åˆ’

1. **å¤šè´§å¸æ”¯æŒ**: æ‰©å±•æ”¯æŒæ›´å¤šè´§å¸çš„æ±‡ç‡æŸ¥è¯¢
2. **æ±‡ç‡é¢„è­¦**: æ·»åŠ æ±‡ç‡å˜åŠ¨é¢„è­¦åŠŸèƒ½
3. **å›¾è¡¨å±•ç¤º**: æ·»åŠ æ±‡ç‡èµ°åŠ¿å›¾è¡¨
4. **æ•°æ®ç¼“å­˜**: å®ç°æ±‡ç‡æ•°æ®ç¼“å­˜æœºåˆ¶
5. **å®šæ—¶æ›´æ–°**: æ·»åŠ å®šæ—¶æ›´æ–°æ±‡ç‡æ•°æ®çš„åŠŸèƒ½ 