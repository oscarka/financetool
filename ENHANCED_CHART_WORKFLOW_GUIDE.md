# ğŸ¯ å¢å¼ºç‰ˆAIå›¾è¡¨å·¥ä½œæµç¨‹æŒ‡å— (åŒé‡ç¡®è®¤)

## ğŸ“‹ **å®Œæ•´æµç¨‹æ¦‚è§ˆ**

ä½ ç°åœ¨æ‹¥æœ‰çš„æ˜¯ä¸€ä¸ª**å¸¦åŒé‡ç¡®è®¤æœºåˆ¶çš„å®Œæ•´æµç¨‹**ï¼š

```
ç”¨æˆ·è¾“å…¥é—®é¢˜ â†’ AIæ„å›¾è¯†åˆ« â†’ ã€ç¡®è®¤1: æ˜¯å¦åˆ¶ä½œå›¾è¡¨ã€‘â†’ å›¾è¡¨ç”Ÿæˆ â†’ èŠå¤©ä¸­æ˜¾ç¤ºç¼©ç•¥å›¾ â†’ ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… â†’ ã€ç¡®è®¤2: æ˜¯å¦ä¿å­˜å›¾è¡¨ã€‘â†’ ä¿å­˜åˆ°æ·±åº¦åˆ†æ
```

## ğŸ¯ **è¯¦ç»†æµç¨‹æ­¥éª¤**

### ç¬¬1æ­¥ï¼šç”¨æˆ·è¾“å…¥ + AIæ„å›¾è¯†åˆ«
```
ç”¨æˆ·: "æ˜¾ç¤ºå„å¹³å°çš„èµ„äº§åˆ†å¸ƒ"
â†“
AIæ™ºèƒ½è¯†åˆ«: æ£€æµ‹åˆ°å›¾è¡¨éœ€æ±‚
- å…³é”®è¯åŒ¹é…: "åˆ†å¸ƒ" 
- å›¾è¡¨ç±»å‹: é¥¼å›¾ - å æ¯”åˆ†æ
- æ•°æ®æ¥æº: MCPæ™ºèƒ½åˆ†æ
```

### ç¬¬2æ­¥ï¼šã€ç¡®è®¤1ã€‘æ„å›¾ç¡®è®¤å¯¹è¯æ¡†
**å¼¹å‡ºä¸“ä¸šçš„æ„å›¾ç¡®è®¤å¯¹è¯æ¡†**ï¼ŒåŒ…å«ï¼š

#### ğŸ“Š **å¯¹è¯æ¡†å†…å®¹**
- **ğŸ¤– AIæ£€æµ‹ç»“æœ**ï¼š
  - è¯†åˆ«æ„å›¾: å›¾è¡¨ç”Ÿæˆè¯·æ±‚
  - æ¨èå›¾è¡¨: é¥¼å›¾ - å æ¯”åˆ†æ
  - æ•°æ®æ¥æº: MCPæ™ºèƒ½åˆ†æ
  - é¢„è®¡æ—¶é—´: 2-3ç§’

- **âœï¸ é—®é¢˜ç¼–è¾‘å™¨**ï¼š
  - æ˜¾ç¤ºç”¨æˆ·åŸå§‹é—®é¢˜
  - æä¾›ä¿®æ”¹æŒ‰é’®ï¼Œå…è®¸ç”¨æˆ·ç¼–è¾‘é—®é¢˜
  - å®æ—¶è¾¹æ¡†é«˜äº®ç¼–è¾‘çŠ¶æ€

- **ğŸ“ˆ å›¾è¡¨é¢„è§ˆä¿¡æ¯**ï¼š
  - å°†è¦ç”Ÿæˆçš„å›¾è¡¨ç±»å‹å›¾æ ‡
  - å›¾è¡¨ç”¨é€”è¯´æ˜
  - é€‚ç”¨åœºæ™¯æè¿°

#### ğŸ›ï¸ **æ“ä½œé€‰é¡¹**
- **âŒ å–æ¶ˆ** - ä¸ç”Ÿæˆå›¾è¡¨ï¼Œç»§ç»­æ–‡æœ¬å¯¹è¯
- **âœ¨ ç”Ÿæˆå›¾è¡¨** - ç¡®è®¤ç”Ÿæˆï¼Œè¿›å…¥å›¾è¡¨åˆ¶ä½œ

### ç¬¬3æ­¥ï¼šå›¾è¡¨ç”Ÿæˆä¸­
ç”¨æˆ·ç‚¹å‡»"ç”Ÿæˆå›¾è¡¨"åï¼š
```
æ˜¾ç¤ºè¿›åº¦æ¶ˆæ¯: "æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆä¸“ä¸šå›¾è¡¨..."
â†“
è°ƒç”¨MCP API: è·å–æ•°æ®å¹¶ç”Ÿæˆå›¾è¡¨
â†“
ç”Ÿæˆä¸“ä¸šå›¾è¡¨: åº”ç”¨è®¾è®¡ç³»ç»Ÿè§„èŒƒ
```

### ç¬¬4æ­¥ï¼šèŠå¤©ä¸­æ˜¾ç¤ºå›¾è¡¨ç¼©ç•¥å›¾
å›¾è¡¨ç”Ÿæˆå®Œæˆååœ¨èŠå¤©ç•Œé¢æ˜¾ç¤ºï¼š

#### ğŸ–¼ï¸ **å›¾è¡¨å±•ç¤º**
- **å›¾è¡¨ç¼©ç•¥å›¾**: åœ¨èŠå¤©æ¶ˆæ¯ä¸­å±•ç¤º
- **ç‚¹å‡»æç¤º**: å³ä¸Šè§’"ğŸ” ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…"æç¤º
- **é˜´å½±æ•ˆæœ**: ä¸“ä¸šçš„å¡ç‰‡é˜´å½±
- **æ‚¬æµ®æ•ˆæœ**: é¼ æ ‡æ‚¬æµ®æ—¶çš„äº¤äº’åé¦ˆ

#### ğŸ›ï¸ **å¿«é€Ÿæ“ä½œæŒ‰é’®**
- **ğŸ” æ‰“å¼€è¯¦æƒ…** - æ‰“å¼€å®Œæ•´é¢„è§ˆæ¨¡æ€æ¡†
- **ğŸ’¾ å¿«é€Ÿä¿å­˜** - è§¦å‘ä¿å­˜ç¡®è®¤å¯¹è¯æ¡†
- **ğŸ”„ é‡æ–°ç”Ÿæˆ** - é‡æ–°ç”Ÿæˆå›¾è¡¨

### ç¬¬5æ­¥ï¼šç‚¹å‡»æŸ¥çœ‹å›¾è¡¨è¯¦æƒ…
ç‚¹å‡»å›¾è¡¨æˆ–"æ‰“å¼€è¯¦æƒ…"æŒ‰é’®ï¼Œå¼¹å‡º**å›¾è¡¨é¢„è§ˆæ¨¡æ€æ¡†**ï¼š

#### ğŸ“Š **é¢„è§ˆæ¨¡æ€æ¡†ç‰¹æ€§**
- **å®Œæ•´å›¾è¡¨å±•ç¤º**: é«˜æ¸…ã€å¯äº¤äº’çš„å›¾è¡¨
- **è¯¦ç»†ä¿¡æ¯é¢æ¿**: å›¾è¡¨ç±»å‹ã€ç”Ÿæˆæ—¶é—´ã€æ•°æ®æ¥æºç­‰
- **å¤šç§æ“ä½œé€‰é¡¹**: ä¿å­˜ã€åˆ†äº«ã€å¯¼å‡ºã€é‡æ–°ç”Ÿæˆ

### ç¬¬6æ­¥ï¼šã€ç¡®è®¤2ã€‘ä¿å­˜ç¡®è®¤å¯¹è¯æ¡†
åœ¨é¢„è§ˆæ¨¡æ€æ¡†æˆ–èŠå¤©ä¸­ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå¼¹å‡º**ä¿å­˜ç¡®è®¤å¯¹è¯æ¡†**ï¼š

#### ğŸ’¾ **ä¿å­˜å¯¹è¯æ¡†å†…å®¹**
- **ğŸ“¸ å›¾è¡¨é¢„è§ˆ**: é«˜åº¦200pxçš„å›¾è¡¨é¢„è§ˆ
- **ğŸ“‹ å›¾è¡¨è¯¦æƒ…**: 
  - åŸå§‹é—®é¢˜
  - å›¾è¡¨ç±»å‹
  - ç”Ÿæˆæ—¶é—´
  - æ•°æ®æ¥æº

- **âœï¸ åç§°è®¾ç½®**:
  - æ™ºèƒ½é»˜è®¤åç§°: "èµ„äº§å æ¯”åˆ†æ 01-15 14:30"
  - è‡ªå®šä¹‰åç§°é€‰é¡¹
  - å®æ—¶ç¼–è¾‘å™¨

- **ğŸ·ï¸ åˆ†ç±»è®¾ç½®**:
  - é¢„è®¾åˆ†ç±»: æŠ•èµ„åˆ†æã€èµ„äº§åˆ†å¸ƒã€æ”¶ç›Šç»Ÿè®¡ã€é£é™©è¯„ä¼°ã€å¸‚åœºè¶‹åŠ¿
  - å¯è§†åŒ–æ ‡ç­¾é€‰æ‹©
  - è‡ªå®šä¹‰åˆ†ç±»é€‰é¡¹

#### ğŸ›ï¸ **ä¿å­˜æ“ä½œ**
- **âŒ å–æ¶ˆ** - ä¸ä¿å­˜ï¼Œè¿”å›é¢„è§ˆ
- **ğŸ’¾ ä¿å­˜å›¾è¡¨** - ç¡®è®¤ä¿å­˜åˆ°æ·±åº¦åˆ†æé¡µé¢

### ç¬¬7æ­¥ï¼šä¿å­˜æˆåŠŸ + çŠ¶æ€åé¦ˆ
ä¿å­˜ç¡®è®¤åï¼š
```
æ˜¾ç¤ºæˆåŠŸæç¤º: "å›¾è¡¨å·²ä¿å­˜åˆ°æ·±åº¦åˆ†æé¡µé¢"
â†“
æä¾›å¿«é€Ÿè·³è½¬: "æŸ¥çœ‹"æŒ‰é’®
â†“
æ›´æ–°åº”ç”¨çŠ¶æ€: å›¾è¡¨æ·»åŠ åˆ°æ·±åº¦åˆ†æé¡µé¢
â†“
å…³é—­æ‰€æœ‰æ¨¡æ€æ¡†: è¿”å›èŠå¤©ç•Œé¢
```

## ğŸ¨ **è§†è§‰è®¾è®¡è¯¦è§£**

### 1. æ„å›¾ç¡®è®¤å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– AIæ£€æµ‹åˆ°å›¾è¡¨éœ€æ±‚                        â”‚
â”‚ æ˜¯å¦ä¸ºæ‚¨ç”Ÿæˆé¥¼å›¾ - å æ¯”åˆ†æï¼Ÿ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ§  AIæ™ºèƒ½åˆ†æ                            â”‚
â”‚ è¯†åˆ«æ„å›¾: å›¾è¡¨ç”Ÿæˆè¯·æ±‚                     â”‚
â”‚ æ¨èå›¾è¡¨: é¥¼å›¾ - å æ¯”åˆ†æ                  â”‚
â”‚ æ•°æ®æ¥æº: MCPæ™ºèƒ½åˆ†æ                     â”‚
â”‚ é¢„è®¡æ—¶é—´: 2-3ç§’                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœï¸ æ‚¨çš„é—®é¢˜                [ä¿®æ”¹]         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ˜¾ç¤ºå„å¹³å°çš„èµ„äº§åˆ†å¸ƒ                 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š å°†è¦ç”Ÿæˆçš„å›¾è¡¨                        â”‚
â”‚ [ğŸ“Š] é¥¼å›¾ - å æ¯”åˆ†æ                     â”‚
â”‚      é€‚ç”¨äºå±•ç¤ºå„éƒ¨åˆ†å æ€»ä½“çš„æ¯”ä¾‹å…³ç³»      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         [å–æ¶ˆ]    [âœ¨ ç”Ÿæˆå›¾è¡¨]          â”‚
â”‚   ğŸ’¡ æç¤ºï¼šç”Ÿæˆåæ‚¨å¯ä»¥åœ¨èŠå¤©ä¸­é¢„è§ˆ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. èŠå¤©ä¸­çš„å›¾è¡¨ç¼©ç•¥å›¾
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– æˆ‘ä¸ºæ‚¨ç”Ÿæˆäº†ä¸“ä¸šçš„æ•°æ®åˆ†æå›¾è¡¨ï¼š  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ“Š å›¾è¡¨åŒºåŸŸ             â”‚ â† å¯ç‚¹å‡»ï¼Œæœ‰é˜´å½±
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚                 â”‚         â”‚
â”‚     â”‚   ä¸“ä¸šé¥¼å›¾       â”‚         â”‚
â”‚     â”‚   (ç¼©ç•¥å›¾)       â”‚         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚               ğŸ” ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… â† å³ä¸Šè§’æç¤º â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[ğŸ”æ‰“å¼€è¯¦æƒ…] [ğŸ’¾å¿«é€Ÿä¿å­˜] [ğŸ”„é‡æ–°ç”Ÿæˆ]
```

### 3. ä¿å­˜ç¡®è®¤å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¾ ä¿å­˜å›¾è¡¨åˆ°æ·±åº¦åˆ†æ                      â”‚
â”‚ ä¸ºæ‚¨çš„å›¾è¡¨æ·»åŠ å¤‡æ³¨ï¼Œæ–¹ä¾¿æ—¥åæŸ¥æ‰¾            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¸ å›¾è¡¨é¢„è§ˆ                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â”‚        å®Œæ•´å›¾è¡¨é¢„è§ˆ                  â”‚ â”‚
â”‚ â”‚                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“‹ å›¾è¡¨è¯¦æƒ…                              â”‚
â”‚ åŸå§‹é—®é¢˜: æ˜¾ç¤ºå„å¹³å°çš„èµ„äº§åˆ†å¸ƒ             â”‚
â”‚ å›¾è¡¨ç±»å‹: é¥¼å›¾ - å æ¯”åˆ†æ                 â”‚
â”‚ ç”Ÿæˆæ—¶é—´: 2024-01-15 14:30              â”‚
â”‚ æ•°æ®æ¥æº: MCPæ™ºèƒ½åˆ†æ                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœï¸ å›¾è¡¨åç§°                [è‡ªå®šä¹‰]      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ èµ„äº§å æ¯”åˆ†æ 01-15 14:30            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ·ï¸ å›¾è¡¨åˆ†ç±»                             â”‚
â”‚ [æŠ•èµ„åˆ†æ] [èµ„äº§åˆ†å¸ƒ] [æ”¶ç›Šç»Ÿè®¡]          â”‚
â”‚ [é£é™©è¯„ä¼°] [å¸‚åœºè¶‹åŠ¿] [è‡ªå®šä¹‰]            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        [å–æ¶ˆ]      [ğŸ’¾ ä¿å­˜å›¾è¡¨]         â”‚
â”‚      ğŸ“ ä¿å­˜åˆ°ï¼šæ·±åº¦åˆ†æ > æŠ•èµ„åˆ†æ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ **æŠ€æœ¯å®ç°æ ¸å¿ƒ**

### 1. æ„å›¾ç¡®è®¤æµç¨‹
```dart
// æ£€æµ‹å›¾è¡¨æ„å›¾åæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
void _showChartIntentDialog(String originalQuestion) {
  final chartType = _determineChartType(originalQuestion);
  
  ChartIntentDialog.show(
    context,
    userQuestion: originalQuestion,
    detectedChartType: chartType,
    onConfirm: (confirmed, modifiedQuestion) {
      if (confirmed) {
        final finalQuestion = modifiedQuestion ?? originalQuestion;
        _generateChartResponse(finalQuestion);
      }
    },
  );
}
```

### 2. ä¿å­˜ç¡®è®¤æµç¨‹
```dart
// ä¿å­˜æ—¶æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
void _saveChart(Widget chart, String question, String chartType) {
  ChartSaveDialog.show(
    context,
    chartWidget: chart,
    question: question,
    chartType: chartType,
    onConfirm: (confirmed, customName) {
      if (confirmed) {
        widget.onChartGenerated?.call(chart, question);
        _showSuccessMessage(customName);
      }
    },
  );
}
```

### 3. æ™ºèƒ½å›¾è¡¨ç±»å‹æ£€æµ‹
```dart
String _determineChartType(String question) {
  final q = question.toLowerCase();
  
  if (q.contains('å æ¯”') || q.contains('åˆ†å¸ƒ') || q.contains('æ¯”ä¾‹')) {
    return 'pie';    // é¥¼å›¾
  } else if (q.contains('è¶‹åŠ¿') || q.contains('å˜åŒ–') || q.contains('èµ°åŠ¿')) {
    return 'line';   // æŠ˜çº¿å›¾
  } else if (q.contains('å¯¹æ¯”') || q.contains('æ’è¡Œ') || q.contains('æ¯”è¾ƒ')) {
    return 'bar';    // æŸ±çŠ¶å›¾
  } else if (q.contains('æ˜ç»†') || q.contains('åˆ—è¡¨') || q.contains('è¯¦ç»†')) {
    return 'table';  // æ•°æ®è¡¨æ ¼
  } else {
    return 'chart';  // æ™ºèƒ½é€‰æ‹©
  }
}
```

## ğŸ“± **ç”¨æˆ·ä½“éªŒäº®ç‚¹**

### ğŸ¯ **åŒé‡ç¡®è®¤æœºåˆ¶**
1. **æ„å›¾ç¡®è®¤** - ç¡®ä¿ç”¨æˆ·çœŸçš„æƒ³è¦ç”Ÿæˆå›¾è¡¨
2. **ä¿å­˜ç¡®è®¤** - æä¾›å›¾è¡¨å‘½åå’Œåˆ†ç±»é€‰é¡¹

### âœ¨ **æ™ºèƒ½åŒ–ç‰¹æ€§**
1. **æ™ºèƒ½æ„å›¾è¯†åˆ«** - è‡ªåŠ¨æ£€æµ‹å›¾è¡¨éœ€æ±‚
2. **æ™ºèƒ½å›¾è¡¨æ¨è** - æ ¹æ®é—®é¢˜æ¨èæœ€é€‚åˆçš„å›¾è¡¨ç±»å‹
3. **æ™ºèƒ½å‘½å** - è‡ªåŠ¨ç”Ÿæˆæœ‰æ„ä¹‰çš„å›¾è¡¨åç§°
4. **æ™ºèƒ½åˆ†ç±»** - æä¾›ç›¸å…³çš„åˆ†ç±»é€‰é¡¹

### ğŸ¨ **ä¸“ä¸šè§†è§‰è®¾è®¡**
1. **ä¸€è‡´çš„è®¾è®¡è¯­è¨€** - æ‰€æœ‰å¯¹è¯æ¡†ä½¿ç”¨ç»Ÿä¸€çš„è§†è§‰è§„èŒƒ
2. **æµç•…çš„åŠ¨ç”»æ•ˆæœ** - å¼¹æ€§åŠ¨ç”»å’Œæ¸å˜æ•ˆæœ
3. **æ¸…æ™°çš„ä¿¡æ¯å±‚çº§** - ä¸»è¦ä¿¡æ¯çªå‡ºï¼Œæ¬¡è¦ä¿¡æ¯æ”¶æ•›
4. **ç›´è§‚çš„äº¤äº’æç¤º** - æ˜ç¡®çš„æ“ä½œæŒ‡å¼•

### âš¡ **é«˜æ•ˆçš„äº¤äº’æµç¨‹**
1. **å¤šç§æ“ä½œè·¯å¾„** - å¿«é€Ÿä¿å­˜å’Œè¯¦ç»†ä¿å­˜ä¸¤ç§é€‰æ‹©
2. **å®æ—¶çŠ¶æ€åé¦ˆ** - æ¯ä¸ªæ“ä½œéƒ½æœ‰æ˜ç¡®çš„åé¦ˆ
3. **å¯æ’¤é”€æ“ä½œ** - æ¯ä¸ªç¡®è®¤å¯¹è¯æ¡†éƒ½å¯ä»¥å–æ¶ˆ
4. **æ™ºèƒ½é»˜è®¤é€‰é¡¹** - å‡å°‘ç”¨æˆ·è¾“å…¥è´Ÿæ‹…

## ğŸš€ **æ ¸å¿ƒæ–‡ä»¶æ›´æ–°**

```
widgets/
â”œâ”€â”€ ai_chat_widget.dart           # AIèŠå¤©ç»„ä»¶ (æ›´æ–°)
â”œâ”€â”€ chart_intent_dialog.dart      # æ„å›¾ç¡®è®¤å¯¹è¯æ¡† (æ–°å¢)
â”œâ”€â”€ chart_save_dialog.dart        # ä¿å­˜ç¡®è®¤å¯¹è¯æ¡† (æ–°å¢)
â”œâ”€â”€ chart_preview_modal.dart      # å›¾è¡¨é¢„è§ˆæ¨¡æ€æ¡† (æ›´æ–°)
â”œâ”€â”€ chart_design_system.dart      # è®¾è®¡ç³»ç»Ÿ
â””â”€â”€ mcp_chart_adapter.dart        # MCPé€‚é…å™¨
```

## ğŸ‰ **æ€»ç»“**

ç°åœ¨ä½ æ‹¥æœ‰çš„æ˜¯ä¸€ä¸ª**å®Œæ•´çš„ã€ç”¨æˆ·å‹å¥½çš„ã€ä¸“ä¸šçº§åˆ«çš„**åŒé‡ç¡®è®¤å›¾è¡¨å·¥ä½œæµç¨‹ï¼š

âœ… **å®Œæ•´æµç¨‹**: æ„å›¾è¯†åˆ« â†’ ç¡®è®¤1 â†’ ç”Ÿæˆ â†’ é¢„è§ˆ â†’ ç¡®è®¤2 â†’ ä¿å­˜  
âœ… **æ™ºèƒ½è¯†åˆ«**: è‡ªåŠ¨æ£€æµ‹å›¾è¡¨æ„å›¾ + æ™ºèƒ½ç±»å‹æ¨è  
âœ… **åŒé‡ç¡®è®¤**: ç”Ÿæˆå‰ç¡®è®¤ + ä¿å­˜å‰ç¡®è®¤  
âœ… **ä¸“ä¸šä½“éªŒ**: é‡‘èçº§è§†è§‰è®¾è®¡ + æµç•…äº¤äº’  
âœ… **ç”¨æˆ·å‹å¥½**: å¯ç¼–è¾‘ã€å¯å–æ¶ˆã€æ™ºèƒ½é»˜è®¤å€¼  

è¿™ä¸ªæµç¨‹å®Œå…¨ç¬¦åˆä½ çš„éœ€æ±‚ï¼š
1. âœ… **æ„å›¾è¯†åˆ«åå¼¹çª—ç¡®è®¤** - æ˜¯å¦åˆ¶ä½œå›¾è¡¨
2. âœ… **ç”¨æˆ·ç‚¹å‡»æ˜¯ååˆ¶ä½œ** - ç¡®è®¤åæ‰å¼€å§‹ç”Ÿæˆ
3. âœ… **å¯¹è¯æ¡†ä¸­å‘é€ç¼©ç•¥å›¾** - åˆ¶ä½œå®Œæˆååœ¨èŠå¤©ä¸­æ˜¾ç¤º
4. âœ… **ç‚¹å¼€æŸ¥çœ‹è¯¦æƒ…** - å¯ä»¥æ‰“å¼€å®Œæ•´é¢„è§ˆ
5. âœ… **å¼¹å‡ºä¿å­˜é€‰é¡¹** - ä¿å­˜å‰å†æ¬¡ç¡®è®¤

**è¿™æ˜¯ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼** ğŸš€

## ğŸ”— **å¿«é€Ÿä½¿ç”¨**

```dart
// åœ¨ä½ çš„main.dartä¸­ä½“éªŒå®Œæ•´æµç¨‹
import 'pages/main_app_demo.dart';

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: const MainAppDemo(), // ğŸ¯ ä½“éªŒåŒé‡ç¡®è®¤æµç¨‹
    );
  }
}
```