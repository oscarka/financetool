# ğŸ”„ å®Œæ•´çš„AIå›¾è¡¨å·¥ä½œæµç¨‹æŒ‡å—

## ğŸ“‹ **å®Œæ•´æµç¨‹æ¦‚è§ˆ**

ä½ ç°åœ¨æ‹¥æœ‰çš„æ˜¯ä¸€ä¸ª**å®Œæ•´çš„ç«¯åˆ°ç«¯æµç¨‹**ï¼š

```
ç”¨æˆ·è¾“å…¥é—®é¢˜ â†’ AIç”Ÿæˆå›¾è¡¨ â†’ èŠå¤©ä¸­é¢„è§ˆ â†’ ç‚¹å‡»æ‰“å¼€è¯¦æƒ… â†’ ä¿å­˜åˆ°æ·±åº¦åˆ†æé¡µé¢
```

## ğŸ¯ **è¯¦ç»†æµç¨‹æ­¥éª¤**

### ç¬¬1æ­¥ï¼šAIå¯¹è¯ç”Ÿæˆå›¾è¡¨
```
ç”¨æˆ·: "æ˜¾ç¤ºå„å¹³å°çš„èµ„äº§åˆ†å¸ƒ"
â†“
AIè¯†åˆ«: è¿™æ˜¯ä¸€ä¸ªå›¾è¡¨è¯·æ±‚ (å…³é”®è¯: "åˆ†å¸ƒ")
â†“
å›¾è¡¨ç”Ÿæˆ: è‡ªåŠ¨åˆ›å»ºä¸“ä¸šé¥¼å›¾
â†“
èŠå¤©æ˜¾ç¤º: åœ¨å¯¹è¯ä¸­å±•ç¤ºå›¾è¡¨ç¼©ç•¥å›¾
```

### ç¬¬2æ­¥ï¼šèŠå¤©ä¸­å›¾è¡¨äº¤äº’
åœ¨èŠå¤©ç•Œé¢ä¸­ï¼Œç”¨æˆ·çœ‹åˆ°ï¼š
- **å›¾è¡¨ç¼©ç•¥å›¾** - å¯ä»¥ç›´æ¥åœ¨èŠå¤©ä¸­æŸ¥çœ‹
- **"ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…"æç¤º** - å³ä¸Šè§’æç¤ºå¯ä»¥ç‚¹å‡»
- **å¿«é€Ÿæ“ä½œæŒ‰é’®**ï¼š
  - ğŸ” **æ‰“å¼€è¯¦æƒ…** - æ‰“å¼€å®Œæ•´é¢„è§ˆ
  - ğŸ’¾ **å¿«é€Ÿä¿å­˜** - ç›´æ¥ä¿å­˜åˆ°æ·±åº¦åˆ†æ
  - ğŸ”„ **é‡æ–°ç”Ÿæˆ** - é‡æ–°ç”Ÿæˆå›¾è¡¨

### ç¬¬3æ­¥ï¼šç‚¹å‡»æ‰“å¼€å›¾è¡¨è¯¦æƒ…é¡µé¢
ç‚¹å‡»å›¾è¡¨æˆ–"æ‰“å¼€è¯¦æƒ…"æŒ‰é’®åï¼Œå¼¹å‡ºä¸“ä¸šçš„é¢„è§ˆæ¨¡æ€æ¡†ï¼š

#### ğŸ“Š **é¢„è§ˆæ¨¡æ€æ¡†å†…å®¹**
- **å¤´éƒ¨ä¿¡æ¯**ï¼š
  - å›¾è¡¨ç±»å‹å›¾æ ‡ (é¥¼å›¾/æŸ±çŠ¶å›¾/æŠ˜çº¿å›¾/è¡¨æ ¼)
  - å›¾è¡¨ç±»å‹æè¿°
  - åŸå§‹é—®é¢˜æ˜¾ç¤º
  
- **å›¾è¡¨å±•ç¤ºåŒºåŸŸ**ï¼š
  - å®Œæ•´å°ºå¯¸çš„ä¸“ä¸šå›¾è¡¨
  - é«˜æ¸…æ˜¾ç¤ºï¼Œæ”¯æŒäº¤äº’
  
- **å›¾è¡¨è¯¦ç»†ä¿¡æ¯**ï¼š
  - å›¾è¡¨ç±»å‹ï¼šé¥¼å›¾ - å æ¯”åˆ†æ
  - ç”Ÿæˆæ—¶é—´ï¼š2024-01-15 14:30
  - æ•°æ®æ¥æºï¼šMCPæ™ºèƒ½åˆ†æ
  - é€‚ç”¨åœºæ™¯ï¼šé€‚ç”¨äºå±•ç¤ºå„éƒ¨åˆ†å æ€»ä½“çš„æ¯”ä¾‹å…³ç³»

#### ğŸ›ï¸ **æ“ä½œæŒ‰é’®åŒºåŸŸ**
**ä¸»è¦æ“ä½œ**ï¼š
- ğŸ’¾ **ä¿å­˜åˆ°æ·±åº¦åˆ†æ** (ç»¿è‰²ä¸»æŒ‰é’®) - ä¿å­˜å›¾è¡¨
- ğŸ“Š **æŸ¥çœ‹æ·±åº¦åˆ†æ** (è“è‰²æ¬¡æŒ‰é’®) - è·³è½¬åˆ°åˆ†æé¡µé¢

**æ¬¡è¦æ“ä½œ**ï¼š
- ğŸ“¤ **åˆ†äº«å›¾è¡¨** - åˆ†äº«åŠŸèƒ½
- ğŸ”„ **é‡æ–°ç”Ÿæˆ** - é‡æ–°ç”Ÿæˆå›¾è¡¨  
- ğŸ“¥ **å¯¼å‡ºå›¾ç‰‡** - å¯¼å‡ºä¸ºå›¾ç‰‡

### ç¬¬4æ­¥ï¼šä¿å­˜åˆ°æ·±åº¦åˆ†æé¡µé¢
ç‚¹å‡»"ä¿å­˜åˆ°æ·±åº¦åˆ†æ"åï¼š
- âœ… **æ˜¾ç¤ºæˆåŠŸæç¤º** - "å›¾è¡¨å·²ä¿å­˜åˆ°æ·±åº¦åˆ†æé¡µé¢"
- ğŸ”— **æä¾›å¿«é€Ÿè·³è½¬** - æç¤ºä¸­çš„"æŸ¥çœ‹"æŒ‰é’®
- ğŸ“± **è‡ªåŠ¨ä¿å­˜** - å›¾è¡¨è‡ªåŠ¨æ·»åŠ åˆ°æ·±åº¦åˆ†æé¡µé¢
- ğŸ”„ **çŠ¶æ€æ›´æ–°** - ä¸»åº”ç”¨çŠ¶æ€å®æ—¶æ›´æ–°

### ç¬¬5æ­¥ï¼šåœ¨æ·±åº¦åˆ†æé¡µé¢æŸ¥çœ‹
åœ¨æ·±åº¦åˆ†æé¡µé¢å¯ä»¥ï¼š
- ğŸ“‹ **æŸ¥çœ‹æ‰€æœ‰ä¿å­˜çš„å›¾è¡¨**
- ğŸ” **æŒ‰æ—¶é—´é¡ºåºæ’åˆ—**
- ğŸ“Š **å®Œæ•´å›¾è¡¨å±•ç¤º**
- ğŸ’¾ **æŒä¹…åŒ–ä¿å­˜** (æœ€å¤šä¿å­˜10ä¸ªå›¾è¡¨)

## ğŸ¨ **è§†è§‰äº¤äº’è®¾è®¡**

### èŠå¤©ä¸­çš„å›¾è¡¨æ˜¾ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– æˆ‘ä¸ºæ‚¨ç”Ÿæˆäº†ä¸“ä¸šçš„æ•°æ®åˆ†æå›¾è¡¨ï¼š  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ“Š å›¾è¡¨åŒºåŸŸ             â”‚ â† å¯ç‚¹å‡»
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚     â”‚                 â”‚         â”‚
â”‚     â”‚   ä¸“ä¸šé¥¼å›¾       â”‚         â”‚
â”‚     â”‚                 â”‚         â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚               ğŸ” ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ… â† æç¤º â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
[ğŸ”æ‰“å¼€è¯¦æƒ…] [ğŸ’¾å¿«é€Ÿä¿å­˜] [ğŸ”„é‡æ–°ç”Ÿæˆ]
```

### é¢„è§ˆæ¨¡æ€æ¡†è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š å›¾è¡¨é¢„è§ˆ            [X] å…³é—­       â”‚
â”‚ é¥¼å›¾ - å æ¯”åˆ†æ                       â”‚
â”‚ ğŸ§  æ˜¾ç¤ºå„å¹³å°çš„èµ„äº§åˆ†å¸ƒ                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚        ğŸ“Š å®Œæ•´å›¾è¡¨å±•ç¤ºåŒºåŸŸ              â”‚
â”‚                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â„¹ï¸ å›¾è¡¨ä¿¡æ¯                          â”‚
â”‚ å›¾è¡¨ç±»å‹: é¥¼å›¾ - å æ¯”åˆ†æ              â”‚
â”‚ ç”Ÿæˆæ—¶é—´: 2024-01-15 14:30           â”‚
â”‚ æ•°æ®æ¥æº: MCPæ™ºèƒ½åˆ†æ                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ’¾ ä¿å­˜åˆ°æ·±åº¦åˆ†æ] [ğŸ“Š æŸ¥çœ‹æ·±åº¦åˆ†æ]  â”‚
â”‚ [ğŸ“¤ åˆ†äº«] [ğŸ”„ é‡æ–°ç”Ÿæˆ] [ğŸ“¥ å¯¼å‡º]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ **æŠ€æœ¯å®ç°è¦ç‚¹**

### 1. èŠå¤©ç»„ä»¶é›†æˆ
```dart
// åœ¨èŠå¤©ä¸­ç‚¹å‡»å›¾è¡¨
GestureDetector(
  onTap: () => _openChartPreview(message),
  child: Container(
    // å›¾è¡¨å®¹å™¨ + ç‚¹å‡»æç¤º
  ),
)
```

### 2. é¢„è§ˆæ¨¡æ€æ¡†è°ƒç”¨
```dart
// æ‰“å¼€å›¾è¡¨é¢„è§ˆ
ChartPreviewModal.show(
  context,
  chartWidget: message.chartWidget!,
  question: message.originalQuestion!,
  chartType: message.chartType ?? 'chart',
  onSaveChart: widget.onChartGenerated,
);
```

### 3. ä¿å­˜æµç¨‹
```dart
// ä¿å­˜å›è°ƒ
void _handleChartGenerated(Widget chart, String question) {
  setState(() {
    _savedCharts.insert(0, chart);
    _savedQuestions.insert(0, question);
  });
}
```

## ğŸ“± **ç”¨æˆ·ä½“éªŒäº®ç‚¹**

### ğŸ¯ **æµç•…çš„äº¤äº’æµç¨‹**
1. **ç›´è§‚çš„è§†è§‰æç¤º** - å›¾è¡¨å³ä¸Šè§’çš„"ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…"
2. **å¤šç§æ“ä½œæ–¹å¼** - ç‚¹å‡»å›¾è¡¨æˆ–æŒ‰é’®éƒ½èƒ½æ‰“å¼€è¯¦æƒ…
3. **ä¸“ä¸šçš„é¢„è§ˆä½“éªŒ** - å…¨å±æ¨¡æ€æ¡†å±•ç¤ºå®Œæ•´ä¿¡æ¯
4. **ä¸€é”®ä¿å­˜åŠŸèƒ½** - ç®€å•å¿«æ·çš„ä¿å­˜æ“ä½œ
5. **å®æ—¶çŠ¶æ€åé¦ˆ** - ä¿å­˜æˆåŠŸæç¤ºå’Œè·³è½¬é€‰é¡¹

### ğŸ¨ **ä¸“ä¸šçš„è§†è§‰è®¾è®¡**
1. **ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€** - é‡‘èçº§çš„è§†è§‰è§„èŒƒ
2. **ä¸°å¯Œçš„åŠ¨ç”»æ•ˆæœ** - å¼¹æ€§åŠ¨ç”»å’Œæ¸å˜æ•ˆæœ
3. **æ¸…æ™°çš„ä¿¡æ¯å±‚çº§** - ä¸»è¦å’Œæ¬¡è¦æ“ä½œæ˜ç¡®åŒºåˆ†
4. **æ™ºèƒ½çš„å›¾è¡¨è¯†åˆ«** - æ ¹æ®é—®é¢˜è‡ªåŠ¨åˆ¤æ–­å›¾è¡¨ç±»å‹

### âš¡ **é«˜æ•ˆçš„åŠŸèƒ½è®¾è®¡**
1. **æ™ºèƒ½å…³é”®è¯è¯†åˆ«** - è‡ªåŠ¨åˆ¤æ–­å›¾è¡¨éœ€æ±‚
2. **å¿«é€Ÿä¿å­˜é€‰é¡¹** - åœ¨èŠå¤©ä¸­å°±èƒ½å¿«é€Ÿä¿å­˜
3. **è¯¦ç»†é¢„è§ˆæ¨¡å¼** - å®Œæ•´çš„å›¾è¡¨ä¿¡æ¯å±•ç¤º
4. **çŠ¶æ€æŒä¹…åŒ–** - å›¾è¡¨ä¿å­˜åˆ°åº”ç”¨çŠ¶æ€ä¸­

## ğŸš€ **æ ¸å¿ƒæ–‡ä»¶ç»“æ„**

```
widgets/
â”œâ”€â”€ ai_chat_widget.dart           # AIèŠå¤©ç»„ä»¶ (ä¸»è¦)
â”œâ”€â”€ chart_preview_modal.dart      # å›¾è¡¨é¢„è§ˆæ¨¡æ€æ¡† (æ–°å¢)
â”œâ”€â”€ chart_design_system.dart      # è®¾è®¡ç³»ç»Ÿ
â””â”€â”€ mcp_chart_adapter.dart        # MCPé€‚é…å™¨

pages/
â”œâ”€â”€ chart_showcase_page.dart      # å›¾è¡¨å±•ç¤ºé¡µé¢
â”œâ”€â”€ main_app_demo.dart           # å®Œæ•´åº”ç”¨æ¼”ç¤º
â””â”€â”€ deep_analysis_page.dart       # æ·±åº¦åˆ†æé¡µé¢
```

## ğŸ‰ **æ€»ç»“**

ç°åœ¨ä½ æ‹¥æœ‰çš„æ˜¯ä¸€ä¸ª**å®Œæ•´çš„ã€ä¸“ä¸šçš„ã€ç”¨æˆ·å‹å¥½çš„**å›¾è¡¨å·¥ä½œæµç¨‹ï¼š

âœ… **å®Œæ•´æµç¨‹**: å¯¹è¯ â†’ é¢„è§ˆ â†’ è¯¦æƒ… â†’ ä¿å­˜ â†’ ç®¡ç†  
âœ… **ä¸“ä¸šè®¾è®¡**: é‡‘èçº§è§†è§‰è§„èŒƒ + æµç•…åŠ¨ç”»  
âœ… **æ™ºèƒ½äº¤äº’**: è‡ªåŠ¨è¯†åˆ« + å¤šç§æ“ä½œæ–¹å¼  
âœ… **ç”¨æˆ·ä½“éªŒ**: ç›´è§‚æç¤º + å®æ—¶åé¦ˆ  

è¿™ä¸ä»…ä»…æ˜¯ä»£ç ï¼Œè€Œæ˜¯ä¸€ä¸ª**ç”Ÿäº§çº§åˆ«çš„å›¾è¡¨è§£å†³æ–¹æ¡ˆ**ï¼

## ğŸ”— **å¿«é€Ÿä½¿ç”¨**

```dart
// åœ¨ä½ çš„main.dartä¸­
import 'pages/main_app_demo.dart';

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: const MainAppDemo(), // ğŸ¯ ä½“éªŒå®Œæ•´æµç¨‹
    );
  }
}
```

**ç°åœ¨å°±å¯ä»¥ä½“éªŒå®Œæ•´çš„AIå›¾è¡¨å·¥ä½œæµç¨‹äº†ï¼** ğŸš€